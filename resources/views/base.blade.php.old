
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{{ $title }} - {{ \App\Helper\Constant::APP_NAME }}</title>

    <link rel="icon" href="{{ asset('favicon.png') }}" type="image/x-icon" />
    <link rel="shortcut icon" href="{{ asset('favicon.png') }}" type="image/x-icon" />

    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700,900" rel="stylesheet" type="text/css">
    <link href="{{ asset('global_assets/css/icons/icomoon/styles.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('assets/css/bootstrap.min.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('assets/css/bootstrap_limitless.min.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('assets/css/layout.min.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('assets/css/components.min.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('assets/css/colors.min.css') }}" rel="stylesheet" type="text/css">
    @yield('css')

    <script src="{{ asset('global_assets/js/main/jquery.min.js') }}"></script>
    <script src="{{ asset('global_assets/js/main/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ asset('global_assets/js/plugins/loaders/blockui.min.js') }}"></script>
    <script src="{{ asset('global_assets/js/plugins/ui/moment/moment.min.js') }}"></script>
    <script src="{{ asset('global_assets/js/demo_pages/layout_fixed_sidebar_custom.js') }}"></script>
    <script src="{{ asset('global_assets/js/plugins/ui/perfect_scrollbar.min.js') }}"></script>
    <script src="{{ asset('global_assets/js/plugins/notifications/pnotify.min.js') }}"></script>
    <script src="{{ asset('global_assets/js/plugins/ui/prism.min.js') }}"></script>
    <script src="{{ asset('global_assets/js/plugins/notifications/sweet_alert.min.js') }}"></script>
    <script src="{{ asset('global_assets/js/plugins/media/fancybox.min.js') }}"></script>
    <script src="{{ asset('assets/numeral.min.js') }}"></script>
    <script src="{{ asset('assets/lodash.js') }}"></script>

    <script src="{{ asset('assets/js/app.js') }}"></script>
    <script>
        swal.setDefaults({
            buttonsStyling: false,
            confirmButtonClass: 'btn btn-primary',
            cancelButtonClass: 'btn btn-light'
        });

        function notifWarning(msg) {
            new PNotify({
                title: 'Perhatian !',
                text: msg,
                icon: 'icon-warning22',
                addclass: 'bg-warning border-warning',
                delay: 2000
            });
        }

        function notifSuccess(msg) {
            new PNotify({
                title: 'Berhasil !',
                text: msg,
                icon: 'icon-checkmark3',
                addclass: 'bg-success border-success',
                delay: 2000
            });
        }

        function rupiah(number) {
            return numeral(number).format('0,0')
        }

        function decimal(number) {
            return numeral(number).format('0,0.00')
        }

        function goBlock(b){
            $.blockUI({
                showOverlay: b,
                css: {
                    border: 'none',
                    padding: '15px',
                    backgroundColor: '#000',
                    '-webkit-border-radius': '10px',
                    '-moz-border-radius': '10px',
                    opacity: .5,
                    color: '#fff'
                }});
        }
    </script>
    @yield("js")

</head>

<body class="navbar-top">

<div class="navbar navbar-expand-md navbar-dark fixed-top">
    <div class="navbar-brand">
        <a href="/" class="d-inline-block">
            <img src="{{ asset('global_assets/images/logo_light.png') }}" alt="">
        </a>
    </div>

    <div class="d-md-none">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-mobile">
            <i class="icon-tree5"></i>
        </button>
        <button class="navbar-toggler sidebar-mobile-main-toggle" type="button">
            <i class="icon-paragraph-justify3"></i>
        </button>
    </div>

    <div class="collapse navbar-collapse" id="navbar-mobile">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a href="#" class="navbar-nav-link sidebar-control sidebar-main-toggle d-none d-md-block">
                    <i class="icon-paragraph-justify3"></i>
                </a>
            </li>
        </ul>

        <ul class="navbar-nav ml-auto">

            <li class="nav-item dropdown dropdown-user">
                <a href="#" class="navbar-nav-link dropdown-toggle" data-toggle="dropdown">
                    <img src="{{ asset('global_assets/images/image.png') }}" class="rounded-circle" alt="">
                    <span class="letter-icon-title">{{ \Illuminate\Support\Facades\Auth::user()->name }}</span>
                </a>

                <div class="dropdown-menu dropdown-menu-right">
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item"><i class="icon-cog5"></i> Account settings</a>
                    <a href="#" class="dropdown-item"
                       onclick="event.preventDefault();document.getElementById('logout-form').submit();">
                        <i class="icon-switch2"></i> Logout</a>

                    <form id="logout-form" action="{{ route('logout') }}" method="POST" style="display: none;">
                        @csrf
                    </form>
                </div>
            </li>
        </ul>
    </div>
</div>

<div class="page-content">
    <div class="sidebar sidebar-dark sidebar-main sidebar-fixed sidebar-expand-md">
        <div class="sidebar-mobile-toggler text-center">
            <a href="#" class="sidebar-mobile-main-toggle">
                <i class="icon-arrow-left8"></i>
            </a>
            Navigation
            <a href="#" class="sidebar-mobile-expand">
                <i class="icon-screen-full"></i>
                <i class="icon-screen-normal"></i>
            </a>
        </div>

        <div class="sidebar-content">
            <div class="sidebar-user">
                <div class="card-body">
                    <div class="media">
                        <div class="mr-3">
                            <a href="#"><img src="{{ asset('global_assets/images/image.png') }}" width="38" height="38" class="rounded-circle" alt=""></a>
                        </div>

                        <div class="media-body">
                            <div class="media-title font-weight-semibold">{{ \Illuminate\Support\Facades\Auth::user()->name }}</div>
                            <div class="font-size-xs opacity-50">
                                <i class="icon-envelope font-size-sm"></i> &nbsp;{{ \Illuminate\Support\Facades\Auth::user()->email }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card card-sidebar-mobile">
                <ul class="nav nav-sidebar" data-nav-type="accordion">

                    <li class="nav-item-header"><div class="text-uppercase font-size-xs line-height-xs">Main</div> <i class="icon-menu" title="Main"></i></li>

                    @foreach($menu as $row)
                        @if(count($row->sub) == 0)
                            <li class="nav-item">
                                <a href="{{ url($row->link) }}" class="nav-link @if($row->kode == $fitur) active @endif">
                                    <i class="{{ $row->icon }}"></i>
                                    <span>{{ $row->nama }}</span>
                                </a>
                            </li>
                        @else
                            @php($str = explode('.', $fitur))
                            <li class="nav-item nav-item-submenu @if($row->kode == $str[0]) nav-item-expanded nav-item-open @endif">
                                <a href="#" class="nav-link"><i class="{{ $row->icon }}"></i>
                                    <span>{{ $row->nama }}</span>
                                </a>
                                <ul class="nav nav-group-sub" data-submenu-title="{{ $row->nama }}">
                                    @foreach($row->sub as $detail)
                                        <li class="nav-item"><a href="{{ url($detail->link) }}" class="nav-link @if($detail->kode == $fitur) active @endif">{{ $detail->nama }}</a></li>
                                    @endforeach
                                </ul>
                            </li>
                        @endif
                    @endforeach

                </ul>
            </div>
        </div>
    </div>

    <div class="content-wrapper">

        @yield('content')

        <div class="navbar navbar-expand-lg navbar-light">
            <div class="text-center d-lg-none w-100">
                <button type="button" class="navbar-toggler dropdown-toggle" data-toggle="collapse" data-target="#navbar-footer">
                    <i class="icon-unfold mr-2"></i>
                    &nbsp;
                </button>
            </div>

            <div class="navbar-collapse collapse" id="navbar-footer">
                <span class="navbar-text">
                    &copy; {{ date('Y') }}. <a target="_blank" href="#">{{ \App\Helper\Constant::APP_NAME }}</a>
                </span>
            </div>
        </div>
    </div>
</div>

</body>
</html>
